(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{2075:(e,a,t)=>{"use strict";t.d(a,{L:()=>l});var r=t(3464);let l=async(e,a)=>{try{return(await r.A.post(e,a)).data}catch(a){throw console.error("POST ".concat(e," failed:"),a),a}}},2517:(e,a,t)=>{Promise.resolve().then(t.bind(t,3680))},3680:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(5155),l=t(2115),s=t(8005),d=t(2075),o=t(6189),n=t(1802);let c=()=>{let[e,a]=(0,l.useState)(null),[t,c]=(0,l.useState)(""),[i,u]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[b,x]=(0,l.useState)(!1),[m,f]=(0,l.useState)(!1),[y,h]=(0,l.useState)(""),w=async()=>{if(!e||!t||!s.j.currentUser)return void h("Missing required fields or not authenticated.");x(!0),h(""),f(!1);try{let r=e;e.type.startsWith("image/")&&(r=await (0,n.A)(e,{maxSizeMB:1,maxWidthOrHeight:1280,useWebWorker:!0}));let l=new FormData;l.append("file",r),l.append("title",t),l.append("location",i),l.append("people",p),l.append("uid",s.j.currentUser.uid),l.append("displayName",s.j.currentUser.displayName||"Unknown");let b=await (0,d.L)(o.Se.MEDIA.UPLOAD_POST,l);b.success?(f(!0),c(""),u(""),g(""),a(null)):h(b.message||"Upload failed.")}catch(e){console.error("Upload error:",e),h("An error occurred during upload.")}finally{x(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col items-center justify-center px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center w-full max-w-md mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload New Post"}),(0,r.jsx)("div",{className:"bg-green-100 text-green-800 text-sm font-semibold px-4 py-1 rounded-full dark:bg-green-800 dark:text-green-100",children:"Creator Mode"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md p-6 rounded shadow-md",children:[m&&(0,r.jsx)("div",{className:"mb-4 text-green-600 text-sm text-center",children:"âœ… Uploaded successfully!"}),y&&(0,r.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:y}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Write a caption...",value:t,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring focus:border-blue-500"}),(0,r.jsx)("input",{type:"text",placeholder:"Location",value:i,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring focus:border-blue-500"}),(0,r.jsx)("input",{type:"text",placeholder:"People (comma-separated)",value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring focus:border-blue-500"}),(0,r.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>a(e.target.files[0]),className:"block w-full text-sm text-gray-500 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-100"}),(0,r.jsx)("button",{onClick:w,disabled:b,className:"w-full py-2 px-4 rounded text-white font-semibold transition ".concat(b?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:b?"Uploading...":"Upload"})]})]})]})}},6189:(e,a,t)=>{"use strict";t.d(a,{Se:()=>l});let r="".concat("/api").concat("/v1"),l={AUTH:{SIGN_UP:"".concat(r,"/auth/signup")},CREATOR:{UPLOAD_POST:"".concat(r,"/creator/upload-post")},MEDIA:{UPLOAD_POST:"".concat(r,"/creator/upload-post"),FEED:"".concat(r,"/media/feed"),LIKE:"".concat(r,"/media/like"),SEARCH:"".concat(r,"/media/search"),COMMENT:"".concat(r,"/media/comment")}}},8005:(e,a,t)=>{"use strict";t.d(a,{db:()=>o,j:()=>n});var r=t(3915);t(6864);var l=t(5317),s=t(6203);let d=(0,r.Wp)({apiKey:"AIzaSyBOWk752rNyELvJoRVDuzh57mVnDsihu6w",authDomain:"nextjsscalable.firebaseapp.com",projectId:"nextjsscalable",storageBucket:"nextjsscalable.firebasestorage.app",messagingSenderId:"1004223439820",appId:"1:1004223439820:web:15dde7857cbc2edd19b369",measurementId:"G-N0GZ951QJK"}),o=(0,l.aU)(d),n=(0,s.xI)(d)}},e=>{var a=a=>e(e.s=a);e.O(0,[992,118,641,286,464,802,441,684,358],()=>a(2517)),_N_E=e.O()}]);